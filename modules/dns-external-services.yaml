AWSTemplateFormatVersion: "2010-09-09"
Description: "Lightrail Subdomains"

Parameters:
  BaseDomain:
    Type: String
    Description: The Base Domain Name that you want to use

Resources:
  IncomingMail:
    Type: AWS::Route53::RecordSet
    Properties:
      HostedZoneName: !Sub "${BaseDomain}."
      Name: !Sub "${BaseDomain}."
      Type: MX
      TTL: 300
      ResourceRecords:
        - 1 ASPMX.L.GOOGLE.COM.
        - 5 ALT1.ASPMX.L.GOOGLE.COM.
        - 5 ALT2.ASPMX.L.GOOGLE.COM.
        - 10 ALT3.ASPMX.L.GOOGLE.COM.
        - 10 ALT4.ASPMX.L.GOOGLE.COM.
  DomainVerificationRecord:
    Type: AWS::Route53::RecordSet
    Properties:
      HostedZoneName: !Sub "${BaseDomain}."
      Name: !Sub "${BaseDomain}."
      Type: TXT
      TTL: 300
      ResourceRecords:
        - '"google-site-verification=hB0pZKHU41BGKnLqXvBmecFi362yiXMkqKEf5acn-sY"'
        - '"v=spf1 include:_spf.google.com include:amazonses.com ~all"'
  Help:
    Type: AWS::Route53::RecordSet
    Properties:
      HostedZoneName: !Sub "${BaseDomain}."
      Name: !Sub "help.${BaseDomain}."
      Type: CNAME
      TTL: 300
      ResourceRecords:
        - custom.intercom.help
  GoogleDkim:
    Type: AWS::Route53::RecordSet
    Properties:
      HostedZoneName: !Sub "${BaseDomain}."
      Name: !Sub "google._domainkey.${BaseDomain}."
      Type: TXT
      TTL: 300
      ResourceRecords:
        - '"v=DKIM1; k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCGs/2PyMOGH5V94oV6nxQUvlXlgI2Kpmegeh3QcOfW7i+U3TFLEJU2YXuzoXL14KQcTCpVZf65ADDk1P9dsuqlcHzU3j2u8F47MDYW3eJUZzE1jb8fb0DhGO/OibupIrtZy/2zCvvcI0Qck1FOetpAVNt7lJFCKnvJnQriZYGRoQIDAQAB"'
  IntercomDkim:
    Type: AWS::Route53::RecordSet
    Properties:
      HostedZoneName: !Sub "${BaseDomain}."
      Name: !Sub "intercom._domainkey.${BaseDomain}."
      Type: CNAME
      TTL: 300
      ResourceRecords:
        - ebc6e2f6-230a-4c13-bd7a-302e1392ab47.dkim.intercom.io
  HubspotDkim1:
    Type: AWS::Route53::RecordSet
    Properties:
      HostedZoneName: !Sub "${BaseDomain}."
      Name: !Sub "hs1._domainkey.${BaseDomain}."
      Type: CNAME
      TTL: 300
      ResourceRecords:
        - lightrail-com.hs01a.dkim.hubspotemail.net
  HubspotDkim2:
    Type: AWS::Route53::RecordSet
    Properties:
      HostedZoneName: !Sub "${BaseDomain}."
      Name: !Sub "hs2._domainkey.${BaseDomain}."
      Type: CNAME
      TTL: 300
      ResourceRecords:
        - lightrail-com.hs01b.dkim.hubspotemail.net
  HubspotSmtpApi:
    Type: AWS::Route53::RecordSet
    Properties:
      HostedZoneName: !Sub "${BaseDomain}."
      Name: !Sub "smtpapi._domainkey.${BaseDomain}."
      Type: TXT
      TTL: 300
      ResourceRecords:
        - '"k=rsa; t=s; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDPtW5iwpXVPiH5FzJ7Nrl8USzuY9zqqzjE0D1r04xDN6qwziDnmgcFNNfMewVKN2D1O+2J9N14hRprzByFwfQW76yojh54Xu3uSbQ3JP0A7k8o8GutRF8zbFUA8n0ZH2y0cIEjMliXY4W4LwPA7m4q0ObmvSjhd63O9d8z1XkUBwIDAQAB"'
  WooCommerceTest:
    Type: AWS::Route53::RecordSet
    Properties:
      HostedZoneName: !Sub "${BaseDomain}."
      Name: !Sub "woocommercetest.${BaseDomain}."
      Type: A
      TTL: 300
      ResourceRecords:
        - 52.43.28.91
